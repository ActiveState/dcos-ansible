---
# This playbook uninstalls kubernetes on DC/OS as a service

- name: uninstall kubernetes
  dcos_package:
    name: kubernetes
    app_id: "{{ dcos_k8s_app_id }}"
    version: "{{ dcos_k8s_package_version }}"
    state: absent

- name: uninstall kubernetes-proxy on DC/OS
  command: "dcos marathon app remove /{{ dcos_k8s_proxy_app_id }}"
  ignore_errors: true

- name: delete the kubectl executable
  become: false
  file:
    path: '../kubectl'
    state: absent
