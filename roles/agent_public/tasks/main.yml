---
# This playbook deploys the DC/OS public agent nodes

- name: create temporary install directory
  file: path={{ path_tmp }} state=directory mode=0755

- name: download installation file from the workstation
  get_url: url="http://{{ workstation_ip }}:{{ port_webserver }}/dcos_install.sh" dest={{ path_tmp }}/dcos_install.sh mode=0440

- name: install DC/OS public agent
  shell: cd {{ path_tmp }}; sudo bash dcos_install.sh slave_public
  ignore_errors: yes
